# DigiByte node RPC
# For DigiByte multi-algo setups, point this at a daemon configured with `algo=sha256d`.
NODE_RPC_HOST=127.0.0.1
NODE_RPC_PORT=14022
NODE_RPC_USER=change-me
NODE_RPC_PASS=change-me
NODE_RPC_TLS=false

# Stratum server
STRATUM_HOST=0.0.0.0
STRATUM_PORT=3333
# Default for modern BM1370 hardware (Bitaxe, NerdOCTAXE, etc.)
# Use 'stratum' for older/traditional mining software if needed
STRATUM_PREVHASH_MODE=stratum_wordrev
SOCKET_IDLE_TIMEOUT_MS=300000
# Connection limits and rate limiting
MAX_CLIENTS=1000
MAX_CLIENTS_PER_IP=10
CONNECTION_RATE_LIMIT_PER_MIN=60

# HTTP status / metrics
API_HOST=0.0.0.0
API_PORT=8080
# Optional TLS/HTTPS for API server
API_TLS=false
API_TLS_CERT=/path/to/cert.pem
API_TLS_KEY=/path/to/key.pem
# CORS settings
API_CORS_ENABLED=true
API_CORS_ORIGIN=*

# Mining mode (current implementation validates SHA256d only)
POW_ALGO=sha256d
BASE_DIFFICULTY=16384
MIN_DIFFICULTY=1
ENABLE_VARDIFF=true
VARDIFF_TARGET_SHARE_TIME_MS=15000
VARDIFF_RETARGET_EVERY_SHARES=4
VARDIFF_MAX_DIFFICULTY=16384
EXTRANONCE1_SIZE=4
EXTRANONCE2_SIZE=8

# Payout address (REQUIRED - set your DigiByte address here)
POOL_PAYOUT_ADDRESS=dgb1...
# Advanced: Direct scriptPubKey hex (optional, leave empty for normal use)
# Only set this if you know what you're doing - it bypasses address validation
POOL_PAYOUT_SCRIPT_HEX=

# Pool identity
POOL_TAG=/gbf-solo/

# Security
ALLOW_ANY_USER=true
MINER_AUTH_TOKEN=

# Template behavior
ENABLE_LONGPOLL=true
NODE_RPC_TIMEOUT_MS=5000
NODE_RPC_LONGPOLL_TIMEOUT_MS=90000
ALLOW_NODE_POW_ALGO_MISMATCH=false
TEMPLATE_POLL_MS=1000
# When longpoll is healthy, back off poll RPCs to reduce jitter/load without losing block updates.
TEMPLATE_POLL_MS_LONGPOLL_HEALTHY=5000
LONGPOLL_HEALTHY_GRACE_MS=120000
# full | fast | prevhash (fast is a good latency/default tradeoff)
TEMPLATE_FINGERPRINT_MODE=fast
KEEP_OLD_JOBS=8
MAX_JOB_SUBMISSIONS_TRACKED=50000
# Async prewarm of block tx hex when a share lands near network target (reduces submitblock latency).
ENABLE_NEAR_CANDIDATE_PREWARM=true
NEAR_CANDIDATE_PREWARM_FACTOR=256
GBT_RULES=segwit

# Logging
LOG_LEVEL=info
# Interval for background stats logging (even when dashboard closed) in milliseconds
# Default: 30000 (30 seconds)
STATS_LOGGING_INTERVAL_MS=30000

# Stats persistence (built-in snapshot + WAL, no external dependencies)
STATS_PERSISTENCE_ENABLED=true
STATS_PERSISTENCE_DIR=data
STATS_WAL_CAPTURE_MS=1000
STATS_WAL_FLUSH_MS=1000
STATS_CHECKPOINT_MS=60000
STATS_RECENT_SHARES_MAX=240
